{% extends 'base.html.twig' %}

{% block title %} {{ title }} {% endblock %}

{% block body %}
<!-- Blog Content
================================================== -->
<div class="row">

    <!-- Blog Posts
    ================================================== -->
    <div class="span8 blog">

        <!-- Blog Posts -->
        {% if posts %}
        {% for post in posts %}
        <article>
            <h3 class="title-bg"><a href="{{ path('post_show', {'slug': post.slug}) }}"> {{ post.title | title }} </a></h3>
            <div class="post-summary">
                <a href="{{ path('post_show', {'slug': post.slug}) }}"><img src="{{ asset('src/img/gallery/post-img-2.jpg') }}" alt="Post Thumb"></a>
                <p>
                    {% set postContent = post.content %}
                    {{ post.content | length > 450 ? post.content | slice(0, 450) ~ '...' : post.content }}
                </p>
                <div class="post-summary-footer">
                    <button class="btn btn-small btn-inverse" type="button" onclick="location.href='{{ path('post_show', {'slug': post.slug}) }}'">Read more</button>
                    <ul class="post-data">
                        <li><i class="icon-calendar"></i>{{ post.createdAt | date('Y-m-d') }}</li>
                        <li><i class="icon-user"></i> <a href="{{ path('author_posts_show', {'slug': post.author.slug}) }}">{{ post.author.fullname | title }}</a></li>
                        <li><a href="{{ path('posts_in_category_show', {'slug': post.category.slug}) }}"><i class="icon-plus-sign"></i>{{ post.category.name }}</a></li>
                    </ul>
                </div>
            </div>
        </article>
        {% endfor %}
        {% endif %}

        <!-- Pagination -->
        <div class="pagination">
            {{ knp_pagination_render(posts) }}
        </div>
    </div>

    {% block right_sidebar %}
        {{ render(controller('App\\Controller\\BlogController::rightSidebar')) }}
    {% endblock %}


    {% endblock %}